# Replace stoat.example.com with your actual public domain throughout this file
apiVersion: v1
kind: ConfigMap
metadata:
  name: revolt-toml
  namespace: stoat
data:
  Revolt.toml: |
    [hosts]
    app = "https://stoat.example.com"
    api = "https://stoat.example.com/api"
    events = "wss://stoat.example.com/ws"
    autumn = "https://stoat.example.com/autumn"
    january = "https://stoat.example.com/january"

    [hosts.livekit]
    worldwide = "wss://stoat.example.com/livekit"

    [api.livekit.nodes.worldwide]
    url = "http://livekit.stoat.svc.cluster.local:7880"
    key = "LIVEKIT_KEY_PLACEHOLDER"
    secret = "LIVEKIT_SECRET_PLACEHOLDER"

    [pushd.vapid]
    private_key = "VAPID_PRIVATE_KEY_PLACEHOLDER"
    public_key = "VAPID_PUBLIC_KEY_PLACEHOLDER"

    [files]
    encryption_key = "FILES_ENCRYPTION_KEY_PLACEHOLDER"

    [files.s3]
    endpoint = "http://minio.minio.svc.cluster.local:9000"
    region = "minio"
    bucket = "revolt-uploads"
    access_key_id = "stoat"
    secret_access_key = "MINIO_STOAT_PASSWORD_PLACEHOLDER"
---
apiVersion: v1
kind: ConfigMap
metadata:
  name: livekit-config
  namespace: stoat
data:
  livekit.yml: |
    rtc:
      use_external_ip: true
      port_range_start: 50000
      port_range_end: 50100
      tcp_port: 7881

    redis:
      address: redis.stoat.svc.cluster.local:6379

    turn:
      enabled: false

    webhook:
      api_key: LIVEKIT_KEY_PLACEHOLDER
      urls:
        - http://voice-ingress.stoat.svc.cluster.local:8500/worldwide

    keys:
      LIVEKIT_KEY_PLACEHOLDER: LIVEKIT_SECRET_PLACEHOLDER
